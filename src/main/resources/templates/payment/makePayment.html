<!DOCTYPE html>
<html lang="en">
<head data-th-replace="~{fragments/header :: headerFragment}">
    <meta charset="UTF-8">
    <title>Thymeleaf Springboot </title>
</head>
<body>
<nav data-th-replace="~{fragments/navBar :: navBarFragment}"></nav>

<div class="container-fluid ">
    <div class="row text-center formManagement border-info">
        <div class="col">
            <a class="btn btn-success" href="/payment/add">
                <i class="fa fa-user-plus" style="font-size: 18px;"></i> &nbsp; New Payment </a>

        </div>
        <div class="col ">
            <h4 class="text-info text-center">
                <strong>
                    Payment Management
                </strong>
            </h4>
        </div>
        <div class="col">
        </div>
    </div>
</div>
<div class="container-fluid">
    <!--Not Paid Purchase order history-->
    <div class="form-row">
        <button type="button" class="btn btn-info mb-5 btn-block text-capitalize" data-toggle="collapse"
                data-target="#dataTargetCollapse"
                aria-expanded="false" aria-controls="dataTargetCollapse"
                data-th-text="${purchaseOrderNeedToPay.supplier.name +' need to pay purchase order list'}"></button>
        <div class="collapse mx-auto" id="dataTargetCollapse">
            <div class="container-fluid" data-th-if="${not #lists.isEmpty(purchaseOrders)}">
                <div class="table-responsive">
                    <table class="table table-striped table-condensed">
                        <thead>
                        <tr>
                            <th> Index</th>
                            <th>Purchase Order Number</th>
                            <th>Purchase Amount</th>
                            <th>Paid Amount</th>
                            <th>Need to be Paid</th>
                            <th>Requested Date</th>
                            <th>GRN Date</th>
                            <th> Modify</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr data-th-each="purchaseOrder, rowCount : ${purchaseOrders}">
                            <th data-th-text="${rowCount.count}"></th>
                            <th data-th-text="${purchaseOrder.code}"></th>
                            <th data-th-text="${purchaseOrder.price}"></th>
                            <th data-th-text="${purchaseOrder.paidAmount}"></th>
                            <th data-th-text="${purchaseOrder.needToPaid}"></th>
                            <th data-th-text="${{purchaseOrder.createdAt}}"></th>
                            <th data-th-text="${{purchaseOrder.grnAt}}"></th>
                            <th>
                                <a id="edit" data-th-href="${'/payment/' + purchaseOrder.id}"
                                   class="btn btn-primary btn-sm mr-2 p-2">Pay
                                </a>
                            </th>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <!--payment history according to particular purchase order -->
    <div class="form-row" data-th-if="${not #lists.isEmpty(purchaseOrderNeedToPay.payments)}">
        <div class="table-responsive">
            <table class="table table-striped table-condensed">
                <thead>
                <tr>
                    <th>Index</th>
                    <th>Payment Code</th>
                    <th>Payment Amount</th>
                    <th>Bank Name</th>
                    <th>Payment Method</th>
                    <th>Paid Date</th>
                </tr>
                </thead>
                <tbody>
                <tr data-th-each="payment ,rowCount : ${purchaseOrderNeedToPay.payments}">
                    <th data-th-text="${rowCount.count}"></th>
                    <th data-th-text="${payment.code}"></th>
                    <th data-th-text="${payment.amount}"></th>
                    <th data-th-text="${payment.bankName!=null? payment.bankName:'Not Mentioned'}"></th>
                    <th data-th-text="${payment.paymentMethod.paymentMethod}"></th>
                    <th data-th-text="${payment.amount}"></th>
                    <th data-th-text="${payment.createdAt}"></th>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
    <!--Payment-->
    <div class="container mx-auto ">
        <form action="/payment" method="post" data-th-object="${payment}">
                <!--purchase order-->
                <input type="hidden" data-th-value="${purchaseOrderNeedToPay.id}" data-th-name="${'purchaseOrder.id'}">
                <!--Payment Method-->
                <div class="form-row ">
                    <div class="col-md-4 text-right">
                        <label data-th-for="${paymentMethod}">Payment Method:</label>
                    </div>
                    <div class="col-md-8">
                        <div class="custom-control custom-checkbox custom-control-inline "
                             data-th-each="paymentMethod,index : ${paymentMethods}">
                            <input class="custom-control-input gender" required
                                   data-th-name="${'paymentMethod'}"
                                   data-th-value="${paymentMethod}"
                                   data-th-id="${index.index}+${paymentMethod}" type="radio"
                                   data-th-checked="${genders==gender}"/>
                            <label class="custom-control-label"
                                   data-th-for="${index.index}+${paymentMethod}"
                                   data-th-text="${paymentMethod.paymentMethod}"> radio
                            </label>
                        </div>
                    </div>
                </div>
                <!--Bank Name-->
                <div class="form-row text-right">
                    <div class="col-md-4">
                        <label class="control-label" for="callingName">Bank Name :</label>
                    </div>
                    <div class="col-md-8">
                        <input id="callingName" data-th-field="*{bankName}" class="form-control" tabindex="5"
                               type="text" minlength="5"/>
                        <span class="error" data-th-errors="*{bankName}"
                              data-th-if="${#fields.hasErrors('bankName')}" id="callingNameError">Error
                                                                       Calling                                                                                                                        Name</span>
                    </div>
                </div>
                <!--This purchase order value-->
            <div class="form-row text-right">
                <div class="col-md-4">
                    <label class="control-label" for="sellPrice">Purchase Order's Amount :</label>
                </div>
                <div class="col-md-8">
                    <input class="form-control" data-th-value="${amount}" id="" required tabindex="8"
                           type="number" step="0.01" readonly/>
                    <span class="text-warning"
                          data-th-errors="*{amount}" data-th-if="${#fields.hasErrors('amount')}">Error ROP</span>
                </div>
            </div>
                <!--Amount-->
                <div class="form-row text-right">
                    <div class="col-md-4">
                        <label class="control-label" for="sellPrice">Amount :</label>
                    </div>
                    <div class="col-md-8">
                        <input class="form-control" data-th-field="*{amount}" id="sellPrice" required tabindex="8"
                               type="number" step="0.01"/>
                        <span class="text-warning"
                              data-th-errors="*{amount}" data-th-if="${#fields.hasErrors('amount')}">Error ROP</span>
                    </div>
                </div>
                <!--remarks-->
                <div class="form-row text-right">
                    <div class="col-md-4">
                        <label>Remarks</label></div>
                    <div class="col-md-8">
                        <textarea class="form-control" data-th-field="*{remarks}" rows="2"></textarea>
                    </div>
                </div>
                <!--Button-->
                <div class="form-group col-md-12 col-sm-12 text-center mt-5 flex-column ">
                    <!--Back Button-->
                    <a class="btn btn-dark" href="/payment" tabindex="14">
                        <i class="fas fa-arrow-circle-left" style="font-size: 20px"></i>&nbsp;&nbsp;Back
                    </a>
                    <!--Save Button-->
                    <button class="btn btn-success ml-5" tabindex="12" type="submit">
                        <i class="fa fa-save " style="font-size: 20px"></i>&nbsp;&nbsp;<span
                            data-th-text="${'Save'}"
                            id="submit"></span>
                    </button>
                    <!--Cancel Button-->
                    <button class="btn btn-warning ml-5" tabindex="13" type="reset">
                        <i class="far fa-times-circle" style="font-size: 20px"></i>&nbsp;&nbsp;Cancel
                    </button>
                </div>
        </form>
    </div>
</div>

<!--footer include-->
<footer data-th-replace="~{fragments/footer :: footerFragment}"></footer>
<!--script include-->
<script data-th-replace="~{fragments/script :: scriptFragment}"></script>

</body>
</html>